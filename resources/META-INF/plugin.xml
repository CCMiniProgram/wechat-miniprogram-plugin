<idea-plugin>
    <id>com.zxy.ijplugin.wechat-miniprogram</id>
    <name>Wechat mini program support</name>
    <vendor url="https://gitee.com/zxy_c/wechat-miniprogram-plugin">Gitee</vendor>

    <description><![CDATA[
        支持<a href="https://developers.weixin.qq.com/miniprogram/introduction/">微信小程序</a>项目

        <h3>开始使用</h3>

        <ul>
            <li>打开微信小程序项目</li>
            <li>确保存在project.config.json配置文件</li>
            <li>现在，你可以使用本插件提供的全部功能</li>
        </ul>

        <h3>主要功能</h3>

        <ul>
            <li>wxml/wxss/wxs文件支持</li>
            <li>创建微信小程序组件以及页面</li>
            <li>相关文件导航</li>
            <li>微信小程序自定义组件支持</li>
            <li>微信小程序配置文件支持</li>
            <li>代码检查以及自动修复</li>
        </ul>

        详细的使用文档以及功能说明请访问<a href="https://gitee.com/zxy_c/wechat-miniprogram-plugin/wikis">Gitee Wiki</a>
        ]]></description>

    <depends>com.intellij.modules.lang</depends>
    <depends>JavaScript</depends>
    <depends>com.intellij.css</depends>
    <version>1.0.0</version>
    <idea-version since-build="192.4257"/>

    <actions>
        <action class="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramPageAction"
                id="CreateWechatMiniProgramPageAction"
                text="Create Wechat Mini Program Page"
                description="Create wechat mini program page (wxml js css json)">
            <add-to-group group-id="NewGroup" anchor="first"/>
        </action>
        <action id="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramComponentAction"
                class="com.zxy.ijplugin.wechat_miniprogram.action.CreateWechatMiniProgramComponentAction"
                text="Create Wechat Mini Program Component"
                description="Create wechat mini program component (wxml,js,json,wxss)">
            <add-to-group group-id="NewGroup" anchor="first"/>
        </action>

    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <gotoRelatedProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WechatMiniProgramGotoRelatedProvider"/>

        <renamePsiElementProcessor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXMLClassRenamePsiElementProcessor"/>
        <!--        <renameHandler implementation="com.zxy.ijplugin.wechat_miniprogram.rename.WXSSIdRenameHandler"/>-->
        <referencesSearch implementation="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXSSElementSearcher"/>

        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXSSInvalidImportInspection"
                displayName="Missing or invalid wxss import path"
                groupName="Wechat mini program"
                shortName="WXSSInvalidImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WxmlWxsModuleImportInspection"
                displayName="Invalid wxs.src attribute"
                groupName="Wechat mini program"
                shortName="WxmlWxsModuleImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXMLInvalidImportInspection"
                displayName="Missing or invalid wxml import path"
                groupName="Wechat mini program"
                shortName="WXMLInvalidImport"
                enabledByDefault="true" level="ERROR"/>
        <localInspection
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WXMLUnknownTagInspection"
                displayName="Unknown wxml tag"
                groupName="Wechat mini program"
                shortName="WXMLUnknownTag"
                enabledByDefault="true" level="ERROR"/>


        <fileType name="WXSS" fieldName="INSTANCE" extensions="wxss" language="WXSS"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSFileType"/>
        <lang.parserDefinition language="WXSS"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.parser.WXSSParserDefinition"/>
        <lang.syntaxHighlighterFactory language="WXSS"
                                       implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSSyntaxHighlighterFactory"/>
        <colorSettingsPage implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSColorSettingPage"/>
        <colorProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.line_mark.WXSSElementColorProvider"/>
        <gotoSymbolContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXSSIdChooseByNameContributor"/>
        <gotoSymbolContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXSSClassChooseByNameContributor"/>
        <lang.commenter language="WXSS"
                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSCommenter"/>
        <lang.braceMatcher language="WXSS"
                           implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.WXSSBraceMatcher"/>
        <quoteHandler fileType="WXSS" className="com.zxy.ijplugin.wechat_miniprogram.editor.WXSSDoubleQuoteHandler"/>
        <lang.formatter language="WXSS"
                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.formatter.WXSSFormattingModelBuilder"/>
        <completion.contributor language="WXSS"
                                implementationClass="com.zxy.ijplugin.wechat_miniprogram.completion.WXSSCompletionContributor"/>
        <lang.refactoringSupport language="WXSS"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXSSSelectorRefactoring"/>
        <lang.namesValidator language="WXSS"
                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.validator.WXSSNamesValidator"/>
        <lang.findUsagesProvider language="WXSS"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXSSFindUsageProvider"/>
        <psi.referenceContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXSSReferenceContributor"/>
        <lang.elementManipulator forClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxss.psi.WXSSClassSelector"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.manipulator.WXMLClassSelectorManipulator"/>

        <fileType name="WXML" extensions="wxml" language="WXML"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLFileType"
                  fieldName="INSTANCE"/>
        <lang.parserDefinition language="WXML"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.parser.WXMLParserDefinition"/>
        <lang.syntaxHighlighterFactory
                language="WXML"
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLSyntaxHighlighterFactory"/>
        <colorSettingsPage implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WXMLColorSettingPage"/>
        <typedHandler implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagCloseTypedHandler"/>
        <completion.contributor
                implementationClass="com.zxy.ijplugin.wechat_miniprogram.completion.WXMLCompletionContributor"
                language="WXML"/>
        <editorFactoryListener implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagNameSynchronizer"/>
        <lang.foldingBuilder language="WXML"
                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.folding.WXMLTagPairFoldingBuilder"/>
        <lang.foldingBuilder language="WXML"
                             implementationClass="com.zxy.ijplugin.wechat_miniprogram.folding.WXMLIncludeTagFolding"/>
        <breadcrumbsInfoProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.breadcrumbs.WXMLElementBreadcrumbsProvider"/>
        <lang.formatter language="WXML"
                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.formatter.WXMLFormattingModelBuilder"/>
        <extendWordSelectionHandler
                implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLStartTagSelectioner"/>
        <extendWordSelectionHandler implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLEndTagSelectioner"/>
        <highlightingPassFactory
                implementation="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLTagTreeHighlightingPassFactory"/>
        <braceMatcher filetype="WXML"
                      implementationClass="com.zxy.ijplugin.wechat_miniprogram.editor.WXMLBraceMatcher"/>
        <colorProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.line_mark.WXMLElementColorProvider"/>
        <psi.referenceContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXMLReferenceContributor"/>
        <lang.elementManipulator forClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.psi.WXMLStringText"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.manipulator.WXMLStringTextManipulator"/>
        <multiHostInjector implementation="com.zxy.ijplugin.wechat_miniprogram.lang.wxml.WxmlJSInjector"/>
        <include.provider
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WxmlJsModuleFileIncludeProvider"/>
        <lang.findUsagesProvider language="WXML"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.usage.WXMLFindUsageProvider"/>
        <gotoSymbolContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.navigation.WXMLTemplateDefinitionChooseByNameContributor"/>
        <lang.refactoringSupport language="WXML"
                                 implementationClass="com.zxy.ijplugin.wechat_miniprogram.reference.refactoring.WXMLTemplateNameRefactoring"/>

        <fileType name="WXS" fieldName="INSTANCE" extensions="wxs" language="JavaScript 1.5"
                  implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.wxs.WXSFileType"/>

        <lang.parserDefinition language="WxmlJs"
                               implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.parser.WxmlJsParserDefinition"/>
        <lang.syntaxHighlighterFactory language="WxmlJs"
                                       implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.highlighting.WxmlJsHighlighterFactory"/>

        <psi.referenceContributor
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WechatMiniProgramJSONReferenceContributor"/>
    </extensions>

    <extensions defaultExtensionNs="JavaScript">
        <predefinedLibraryProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.context.MyJSPredefinedLibraryProvider"/>
        <JsonSchema.ProviderFactory
                implementation="com.zxy.ijplugin.wechat_miniprogram.completion.WechatMiniProgramJsonSchemaProviderFactory"/>
        <dialectSpecificHandlersFactory language="WxmlJs"
                                        implementationClass="com.zxy.ijplugin.wechat_miniprogram.lang.expr.WxmlJsSpecificHandlersFactory"/>
        <intentionAndInspectionFilter language="WXML"
                                      implementationClass="com.zxy.ijplugin.wechat_miniprogram.inspections.WxmlJsInspectionFilter"/>
        <elementScopeProvider
                implementation="com.zxy.ijplugin.wechat_miniprogram.reference.WXMLElementResolveScopeProvider"/>
    </extensions>

</idea-plugin>