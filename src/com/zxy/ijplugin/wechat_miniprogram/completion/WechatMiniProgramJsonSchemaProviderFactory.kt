package com.zxy.ijplugin.wechat_miniprogram.completion

import com.intellij.openapi.project.Project
import com.intellij.openapi.vfs.VirtualFile
import com.jetbrains.jsonSchema.extension.JsonSchemaFileProvider
import com.jetbrains.jsonSchema.extension.JsonSchemaProviderFactory
import com.jetbrains.jsonSchema.extension.SchemaType

class WechatMiniProgramJsonSchemaProviderFactory:JsonSchemaProviderFactory {
    override fun getProviders(project: Project): MutableList<JsonSchemaFileProvider> {
        return mutableListOf(WechatMiniProgramProjectConfigJsonSchemaFileProvider())
    }
}

class WechatMiniProgramProjectConfigJsonSchemaFileProvider : JsonSchemaFileProvider {

    override fun getName(): String {
        return "app.json"
    }

    override fun isAvailable(virtualFile: VirtualFile): Boolean {
        return virtualFile.name == "app.json"
    }

    override fun getSchemaFile(): VirtualFile? {
        return JsonSchemaProviderFactory.getResourceFile(
                this.javaClass,
                "{\n  \"title\": \"JSON schema for the TypeScript compiler's configuration file\",\n  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\n  \"definitions\": {\n    \"filesDefinition\": {\n      \"properties\": {\n        \"files\": {\n          \"description\": \"If no 'files' or 'include' property is present in a tsconfig.json, the compiler defaults to including all files in the containing directory and subdirectories except those specified by 'exclude'. When a 'files' property is specified, only those files and those specified by 'include' are included.\",\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    },\n    \"excludeDefinition\": {\n      \"properties\": {\n        \"exclude\": {\n          \"description\": \"Specifies a list of files to be excluded from compilation. The 'exclude' property only affects the files included via the 'include' property and not the 'files' property. Glob patterns require TypeScript version 2.0 or later.\",\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    },\n    \"includeDefinition\": {\n      \"properties\": {\n        \"include\": {\n          \"description\": \"Specifies a list of glob patterns that match files to be included in compilation. If no 'files' or 'include' property is present in a tsconfig.json, the compiler defaults to including all files in the containing directory and subdirectories except those specified by 'exclude'. Requires TypeScript version 2.0 or later.\",\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          }\n        }\n      }\n    },\n    \"compileOnSaveDefinition\": {\n      \"properties\": {\n        \"compileOnSave\": {\n          \"description\": \"Enable Compile-on-Save for this project.\",\n          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"extendsDefinition\": {\n      \"properties\": {\n        \"extends\": {\n          \"description\": \"Path to base configuration file to inherit from. Requires TypeScript version 2.1 or later.\",\n          \"type\": \"string\"\n        }\n      }\n    },\n    \"compilerOptionsDefinition\": {\n      \"properties\": {\n        \"compilerOptions\": {\n          \"type\": \"object\",\n          \"description\": \"Instructs the TypeScript compiler how to compile .ts files.\",\n          \"properties\": {\n            \"charset\": {\n              \"description\": \"The character set of the input files.\",\n              \"type\": \"string\"\n            },\n            \"composite\": {\n              \"description\": \"Enables building for project references.\",\n              \"type\": \"boolean\"\n            },\n            \"declaration\": {\n              \"description\": \"Generates corresponding d.ts files.\",\n              \"type\": \"boolean\"\n            },\n            \"declarationDir\": {\n              \"type\": \"string\",\n              \"description\": \"Specify output directory for generated declaration files. Requires TypeScript version 2.0 or later.\"\n            },\n            \"diagnostics\": {\n              \"description\": \"Show diagnostic information.\",\n              \"type\": \"boolean\"\n            },\n            \"emitBOM\": {\n              \"description\": \"Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files.\",\n              \"type\": \"boolean\"\n            },\n            \"emitDeclarationOnly\": {\n              \"description\": \"Only emit '.d.ts' declaration files.\",\n              \"type\": \"boolean\"\n            },\n            \"incremental\": {\n              \"description\": \"Enable incremental compilation.\",\n              \"type\": \"boolean\"\n            },\n            \"tsBuildInfoFile\": {\n              \"description\": \"Specify file to store incremental compilation information.\",\n              \"type\": \"string\"\n            },\n\n            \"inlineSourceMap\": {\n              \"description\": \"Emit a single file with source maps instead of having a separate file.\",\n              \"type\": \"boolean\"\n            },\n            \"inlineSources\": {\n              \"description\": \"Emit the source alongside the sourcemaps within a single file; requires --inlineSourceMap to be set.\",\n              \"type\": \"boolean\"\n            },\n            \"jsx\": {\n              \"description\": \"Specify JSX code generation: 'preserve', 'react', or 'react-native'.\",\n              \"enum\": [ \"preserve\", \"react\", \"react-native\" ]\n            },\n            \"reactNamespace\": {\n              \"description\": \"Specifies the object invoked for createElement and __spread when targeting 'react' JSX emit.\",\n              \"type\": \"string\"\n            },\n            \"listFiles\": {\n              \"description\": \"Print names of files part of the compilation.\",\n              \"type\": \"boolean\"\n            },\n            \"mapRoot\": {\n              \"description\": \"Specifies the location where debugger should locate map files instead of generated locations\",\n              \"type\": \"string\"\n            },\n            \"module\": {\n              \"description\": \"Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015' or 'esnext'.\",\n              \"type\": \"string\",\n              \"anyOf\": [\n                {\n                  \"enum\": [ \"commonjs\", \"amd\", \"umd\", \"system\", \"es6\", \"es2015\", \"esnext\", \"none\" ]\n                }, {\n                  \"pattern\": \"^([cC][oO][mM][mM][oO][nN][jJ][sS]|[aAuU][mM][dD]|[sS][yY][sS][tT][eE][mM]|[eE][sS]([356]|(201[567])|[nN][eE][xX][tT])|[nN][oO][nN][eE])$\"\n                }\n              ]\n            },\n            \"newLine\": {\n              \"description\": \"Specifies the end of line sequence to be used when emitting files: 'CRLF' (dos) or 'LF' (unix).\",\n              \"type\": \"string\",\n              \"anyOf\": [\n                {\n                  \"enum\": [\n                    \"CRLF\",\n                    \"LF\"\n                  ]\n                },\n                {\n                  \"pattern\": \"^(CRLF|LF|crlf|lf)$\"\n                }\n              ]\n            },\n            \"noEmit\": {\n              \"description\": \"Do not emit output.\",\n              \"type\": \"boolean\"\n            },\n            \"noEmitHelpers\": {\n              \"description\": \"Do not generate custom helper functions like __extends in compiled output.\",\n              \"type\": \"boolean\"\n            },\n            \"noEmitOnError\": {\n              \"description\": \"Do not emit outputs if any type checking errors were reported.\",\n              \"type\": \"boolean\"\n            },\n            \"noImplicitAny\": {\n              \"description\": \"Warn on expressions and declarations with an implied 'any' type.\",\n              \"type\": \"boolean\"\n            },\n            \"noImplicitThis\": {\n              \"description\": \"Raise error on 'this' expressions with an implied any type.\",\n              \"type\": \"boolean\"\n            },\n            \"noUnusedLocals\": {\n              \"description\": \"Report errors on unused locals. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"noUnusedParameters\": {\n              \"description\": \"Report errors on unused parameters. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"noLib\": {\n              \"description\": \"Do not include the default library file (lib.d.ts).\",\n              \"type\": \"boolean\"\n            },\n            \"noResolve\": {\n              \"description\": \"Do not add triple-slash references or module import targets to the list of compiled files.\",\n              \"type\": \"boolean\"\n            },\n            \"noStrictGenericChecks\": {\n              \"description\": \"Disable strict checking of generic signatures in function types.\",\n              \"type\": \"boolean\"\n            },\n            \"skipDefaultLibCheck\": {\n              \"type\": \"boolean\"\n            },\n            \"skipLibCheck\": {\n              \"description\": \"Skip type checking of declaration files. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"outFile\": {\n              \"description\": \"Concatenate and emit output to single file.\",\n              \"type\": \"string\"\n            },\n            \"outDir\": {\n              \"description\": \"Redirect output structure to the directory.\",\n              \"type\": \"string\"\n            },\n            \"preserveConstEnums\": {\n              \"description\": \"Do not erase const enum declarations in generated code.\",\n              \"type\": \"boolean\"\n            },\n            \"preserveSymlinks\": {\n              \"description\": \"Do not resolve symlinks to their real path; treat a symlinked file like a real one.\",\n              \"type\": \"boolean\"\n            },\n            \"preserveWatchOutput\": {\n              \"description\": \"Keep outdated console output in watch mode instead of clearing the screen.\",\n              \"type\": \"boolean\"\n            },\n            \"pretty\": {\n              \"description\": \"Stylize errors and messages using color and context (experimental).\",\n              \"type\": \"boolean\"\n            },\n            \"removeComments\": {\n              \"description\": \"Do not emit comments to output.\",\n              \"type\": \"boolean\"\n            },\n            \"rootDir\": {\n              \"description\": \"Specifies the root directory of input files. Use to control the output directory structure with --outDir.\",\n              \"type\": \"string\"\n            },\n            \"isolatedModules\": {\n              \"description\": \"Unconditionally emit imports for unresolved files.\",\n              \"type\": \"boolean\"\n            },\n            \"sourceMap\": {\n              \"description\": \"Generates corresponding '.map' file.\",\n              \"type\": \"boolean\"\n            },\n            \"sourceRoot\": {\n              \"description\": \"Specifies the location where debugger should locate TypeScript files instead of source locations.\",\n              \"type\": \"string\"\n            },\n            \"suppressExcessPropertyErrors\": {\n              \"description\": \"Suppress excess property checks for object literals.\",\n              \"type\": \"boolean\"\n            },\n            \"suppressImplicitAnyIndexErrors\": {\n              \"description\": \"Suppress noImplicitAny errors for indexing objects lacking index signatures.\",\n              \"type\": \"boolean\"\n            },\n            \"stripInternal\": {\n              \"description\": \"Do not emit declarations for code that has an '@internal' annotation.\",\n              \"type\": \"boolean\"\n            },\n            \"target\": {\n              \"description\": \"Specify ECMAScript target version. Permitted values are 'es3', 'es5', 'es6', 'es2015', 'es2016', 'es2017', 'es2018', 'es2019', 'es2020' or 'esnext'.\",\n              \"type\": \"string\",\n              \"default\": \"es3\",\n              \"anyOf\": [\n                {\n                  \"enum\": [\n                    \"es3\",\n                    \"es5\",\n                    \"es6\",\n                    \"es2015\",\n                    \"es2016\",\n                    \"es2017\",\n                    \"es2018\",\n                    \"es2019\",\n                    \"es2020\",\n                    \"esnext\"\n                  ]\n                }, {\n                  \"pattern\": \"^([eE][sS]([356]|(20(1[56789]|20))|[nN][eE][xX][tT]))$\"\n                }\n              ]\n            },\n            \"watch\": {\n              \"description\": \"Watch input files.\",\n              \"type\": \"boolean\"\n            },\n            \"experimentalDecorators\": {\n              \"description\": \"Enables experimental support for ES7 decorators.\",\n              \"type\": \"boolean\"\n            },\n            \"emitDecoratorMetadata\": {\n              \"description\": \"Emit design-type metadata for decorated declarations in source.\",\n              \"type\": \"boolean\"\n            },\n            \"moduleResolution\": {\n              \"description\": \"Specifies module resolution strategy: 'node' (Node) or 'classic' (TypeScript pre 1.6) .\",\n              \"type\": \"string\",\n              \"anyOf\": [\n                {\n                  \"enum\": [\n                    \"classic\",\n                    \"node\"\n                  ]\n                },\n                {\n                  \"pattern\": \"^(([Nn]ode)|([Cc]lassic))$\"\n                }\n              ],\n              \"default\": \"classic\"\n            },\n            \"allowUnusedLabels\": {\n              \"type\": \"boolean\",\n              \"description\": \"Do not report errors on unused labels.\"\n            },\n            \"noImplicitReturns\": {\n              \"description\": \"Report error when not all code paths in function return a value.\",\n              \"type\": \"boolean\"\n            },\n            \"noFallthroughCasesInSwitch\": {\n              \"description\": \"Report errors for fallthrough cases in switch statement.\",\n              \"type\": \"boolean\"\n            },\n            \"allowUnreachableCode\": {\n              \"description\": \"Do not report errors on unreachable code.\",\n              \"type\": \"boolean\"\n            },\n            \"forceConsistentCasingInFileNames\": {\n              \"description\": \"Disallow inconsistently-cased references to the same file.\",\n              \"type\": \"boolean\"\n            },\n            \"baseUrl\": {\n              \"description\": \"Base directory to resolve non-relative module names.\",\n              \"type\": \"string\"\n            },\n            \"paths\": {\n              \"description\": \"Specify path mapping to be computed relative to baseUrl option.\",\n              \"type\": \"object\",\n              \"additionalProperties\": {\n                \"type\": \"array\",\n                \"items\": {\n                  \"type\": \"string\",\n                  \"description\": \"Path mapping to be computed relative to baseUrl option.\"\n                }\n              }\n            },\n            \"plugins\": {\n              \"description\": \"List of TypeScript language server plugins to load. Requires TypeScript version 2.3 or later.\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"name\": {\n                    \"description\": \"Plugin name.\",\n                    \"type\": \"string\"\n                  }\n                }\n              }\n            },\n            \"rootDirs\": {\n              \"description\": \"Specify list of root directories to be used when resolving modules.\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\"\n              }\n            },\n            \"typeRoots\": {\n              \"description\": \"Specify list of directories for type definition files to be included. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\"\n              }\n            },\n            \"types\": {\n              \"description\": \"Type declaration files to be included in compilation. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\"\n              }\n            },\n            \"traceResolution\": {\n              \"description\": \"Enable tracing of the name resolution process.\",\n              \"type\": \"boolean\"\n            },\n            \"allowJs\": {\n              \"description\": \"Allow javascript files to be compiled.\",\n              \"type\": \"boolean\"\n            },\n            \"noErrorTruncation\": {\n              \"description\": \"Do not truncate error messages.\",\n              \"type\": \"boolean\"\n            },\n            \"allowSyntheticDefaultImports\": {\n              \"description\": \"Allow default imports from modules with no default export. This does not affect code emit, just typechecking.\",\n              \"type\": \"boolean\"\n            },\n            \"noImplicitUseStrict\": {\n              \"description\": \"Do not emit 'use strict' directives in module output.\",\n              \"type\": \"boolean\"\n            },\n            \"listEmittedFiles\": {\n              \"description\": \"Enable to list all emitted files. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"disableSizeLimit\": {\n              \"description\": \"Disable size limit for JavaScript project. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\",\n              \"default\": false\n            },\n            \"lib\": {\n              \"description\": \"Specify library file to be included in the compilation. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\",\n                \"enum\": [ \"es5\", \"es6\", \"es2015\", \"es7\", \"es2016\", \"es2017\", \"es2018\", \"es2019\", \"es2020\", \"esnext\", \"dom\", \"dom.iterable\", \"webworker\", \"webworker.importscripts\", \"scripthost\",\n                  \"es2015.core\", \"es2015.collection\", \"es2015.generator\", \"es2015.iterable\", \"es2015.promise\", \"es2015.proxy\", \"es2015.reflect\", \"es2015.symbol\", \"es2015.symbol.wellknown\",\n                  \"es2016.array.include\",\n                  \"es2017.object\", \"es2017.intl\", \"es2017.sharedmemory\", \"es2017.string\", \"es2017.typedarrays\",\n                  \"es2018.asynciterable\", \"es2018.intl\", \"es2018.promise\", \"es2018.regexp\",\n                  \"es2019.array\", \"es2019.object\", \"es2019.string\", \"es2019.symbol\",\n                  \"es2020.string\", \"es2020.symbol.wellknown\",\n                  \"esnext.asynciterable\", \"esnext.array\", \"esnext.bigint\", \"esnext.intl\", \"esnext.symbol\"]\n              }\n            },\n            \"strictNullChecks\": {\n              \"description\": \"Enable strict null checks. Requires TypeScript version 2.0 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"maxNodeModuleJsDepth\": {\n              \"description\": \"The maximum dependency depth to search under node_modules and load JavaScript files. Only applicable with --allowJs.\",\n              \"type\": \"number\",\n              \"default\": 0\n            },\n            \"importHelpers\": {\n              \"description\": \"Import emit helpers (e.g. '__extends', '__rest', etc..) from tslib. Requires TypeScript version 2.1 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"jsxFactory\": {\n              \"description\": \"Specify the JSX factory function to use when targeting react JSX emit, e.g. 'React.createElement' or 'h'. Requires TypeScript version 2.1 or later.\",\n              \"type\": \"string\",\n              \"default\": \"React.createElement\"\n            },\n            \"alwaysStrict\": {\n              \"description\": \"Parse in strict mode and emit 'use strict' for each source file. Requires TypeScript version 2.1 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"strict\": {\n              \"description\": \"Enable all strict type checking options. Requires TypeScript version 2.3 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"strictBindCallApply\": {\n              \"description\": \"Enable stricter checking of of the `bind`, `call`, and `apply` methods on functions.\",\n              \"type\": \"boolean\"\n            },\n            \"downlevelIteration\": {\n              \"description\": \"Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'. Requires TypeScript version 2.3 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"checkJs\": {\n              \"description\": \"Report errors in .js files. Requires TypeScript version 2.3 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"strictFunctionTypes\": {\n              \"description\": \"Disable bivariant parameter checking for function types. Requires TypeScript version 2.6 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"strictPropertyInitialization\": {\n              \"description\": \"Ensure non-undefined class properties are initialized in the constructor. Requires TypeScript version 2.7 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"esModuleInterop\": {\n              \"description\": \"Emit '__importStar' and '__importDefault' helpers for runtime babel ecosystem compatibility and enable '--allowSyntheticDefaultImports' for typesystem compatibility. Requires TypeScript version 2.7 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"allowUmdGlobalAccess\": {\n              \"description\": \"Allow accessing UMD globals from modules.\",\n              \"type\": \"boolean\"\n            },\n            \"keyofStringsOnly\": {\n              \"description\": \"Resolve 'keyof' to string valued property names only (no numbers or symbols). Requires TypeScript version 2.9 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"declarationMap\": {\n              \"description\": \"Generates a sourcemap for each corresponding '.d.ts' file. Requires TypeScript version 2.9 or later.\",\n              \"type\": \"boolean\"\n            },\n            \"resolveJsonModule\": {\n              \"description\": \"Include modules imported with '.json' extension. Requires TypeScript version 2.9 or later.\",\n              \"type\": \"boolean\"\n            }\n          }\n        }\n      }\n    },\n    \"typeAcquisitionDefinition\": {\n      \"properties\": {\n        \"typeAcquisition\": {\n          \"type\": \"object\",\n          \"description\": \"Auto type (.d.ts) acquisition options for this project. Requires TypeScript version 2.1 or later.\",\n          \"properties\": {\n            \"enable\": {\n              \"description\": \"Enable auto type acquisition\",\n              \"type\": \"boolean\",\n              \"default\": false\n            },\n            \"include\": {\n              \"description\": \"Specifies a list of type declarations to be included in auto type acquisition. Ex. [\\\"jquery\\\", \\\"lodash\\\"]\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\"\n              }\n            },\n            \"exclude\": {\n              \"description\": \"Specifies a list of type declarations to be excluded from auto type acquisition. Ex. [\\\"jquery\\\", \\\"lodash\\\"]\",\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"referencesDefinition\": {\n      \"properties\": {\n        \"references\": {\n          \"type\": \"array\",\n          \"description\": \"Referenced projects. Requires TypeScript version 3.0 or later.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"description\": \"Project reference.\",\n            \"properties\": {\n              \"path\": {\n                \"type\": \"string\",\n                \"description\": \"Path to referenced tsconfig or to folder containing tsconfig.\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"type\": \"object\",\n  \"allOf\": [\n    { \"$ref\": \"#/definitions/compilerOptionsDefinition\" },\n    { \"$ref\": \"#/definitions/compileOnSaveDefinition\" },\n    { \"$ref\": \"#/definitions/typeAcquisitionDefinition\" },\n    { \"$ref\": \"#/definitions/extendsDefinition\" },\n    {\n      \"anyOf\": [\n        { \"$ref\": \"#/definitions/filesDefinition\" },\n        { \"$ref\": \"#/definitions/excludeDefinition\" },\n        { \"$ref\": \"#/definitions/includeDefinition\" },\n        { \"$ref\": \"#/definitions/referencesDefinition\" }\n      ]\n    }\n  ]\n}\n"
        )
    }

    override fun getSchemaType(): SchemaType {
        return SchemaType.schema
    }

}